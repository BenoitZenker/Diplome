!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],e):e((t=t||self).VueGL={},t.THREE)}(this,(function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,i){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var s=[null];s.push.apply(s,e);var n=new(Function.bind.apply(t,s));return i&&o(n,i.prototype),n}).apply(null,arguments)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],s=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,a=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(){function t(e){i(this,t),this.parent=e,this.children=[],this.hash=Object.create(null),this.listeners=Object.create(null),this.globalListeners=[],e&&e.children.push(this)}return n(t,[{key:"listen",value:function(t,e){"function"==typeof t?this.globalListeners.includes(t)||this.globalListeners.push(t):t in this.listeners?this.listeners[t].includes(e)||this.listeners[t].push(e):this.listeners[t]=[e]}},{key:"unlisten",value:function(t,e){if("function"==typeof t){var i=this.globalListeners.indexOf(t);i>=0&&this.globalListeners.splice(i,1)}else{var s=this.listeners[t];if(s)if(s.length>1){var n=s.indexOf(e);n>=0&&s.splice(n,1)}else s[0]===e&&delete this.listeners[t]}}},{key:"get",value:function(t){return t in this.hash?this.hash[t]:this.parent&&this.parent.get(t)}},{key:"set",value:function(t,e){this.hash[t]!==e&&(this.hash[t]=e,this.emit(t,e))}},{key:"keys",value:function(){var t=this,e=Object.keys(this.hash);if(!this.parent)return e;var i=this.parent.keys().filter((function(e){return!(e in t.hash)}));return[].concat(c(i),c(e))}},{key:"delete",value:function(t,e){this.hash[t]===e&&(delete this.hash[t],this.emit(t,this.parent&&this.parent.get(t)))}},{key:"emit",value:function(t,e){var i=this;t in this.listeners&&this.listeners[t].forEach((function(t){return t(e)})),this.children.forEach((function(i){t in i.hash||i.emit(t,e)})),this.globalListeners.forEach((function(t){return t(i)}))}},{key:"destroy",value:function(){if(this.parent){var t=this.parent.children;t.splice(t.indexOf(this),1)}}},{key:"fork",value:function(){return new t(this)}}]),t}(),p={inject:{vglNamespace:{default:function(){return{cameras:new u,scenes:new u}}}},provide:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;return{vglNamespace:Object.create(this.vglNamespace,{geometries:{value:e?e.fork():new u},materials:{value:i?i.fork():new u},textures:{value:s?s.fork():new u},object3ds:{value:n?n.fork():new u},curves:{value:a?a.fork():new u}})}},beforeDestroy:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;e&&e.destroy(),i&&i.destroy(),s&&s.destroy(),n&&n.destroy(),a&&a.destroy()},render:function(t){return this.$slots.default?t("div",this.$slots.default):void 0}},d=function(){function t(e,s){i(this,t),this.listeners=e?e.listeners:[],this.inst=s||function(){}}return n(t,[{key:"listen",value:function(t){this.listeners.includes(t)||this.listeners.push(t)}},{key:"unlisten",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"emit",value:function(){this.listeners.forEach((function(t){return t()}))}}]),t}();function f(t){return Array.isArray(t)?t:t.trim().split(/\s+/)}function m(t){return t.isColor?t:new e.Color(t)}function g(t){if(t.isVector2)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return l(e.Vector2,c(i.map(parseFloat)))}function v(t){if(t.isVector3)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return l(e.Vector3,c(i.map(parseFloat)))}function y(t){if(t.isEuler)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return l(e.Euler,c(i.slice(0,3).map(parseFloat)).concat([i[3]]))}function b(t){if(t.isQuaternion)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return l(e.Quaternion,c(i.map(parseFloat)))}function w(t){if(t instanceof e.Spherical)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return l(e.Spherical,c(i.map(parseFloat))).makeSafe()}function S(t){return Array.isArray(t)?t:t.split(",")}function F(t){var e=Array.isArray(t);return e&&t.every((function(t){return t.isVector2}))?t:(e?t:t.split(",")).map(g)}function j(t){return t.isFog?t:l(e.Fog,c(t.trim().split(/\s+/).map((function(t,e){return 0===e?t:parseFloat(t)}))))}var x=Boolean,N=[String,Number],O=[String,Number],A=String,L=String,V=[String,Array],M=[String,e.Color,Number],k=[String,e.Vector2],R=[String,e.Vector3],C=[String,e.Euler],G=[String,e.Quaternion],D=[String,e.Spherical],T=[String,Array],P=[String,Array];function E(t){return!Number.isNaN(parseFloat(t))}function B(t){return/^\s*\S+\s*$/.test(t)}function I(t){return Array.isArray(t)?t.every(B):/\S+/.test(t)}function z(t){if(t instanceof e.Vector2)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 2===i.length&&i.every(E)}function U(t){if(t instanceof e.Vector3)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every(E)}function $(t){return(Array.isArray(t)?t:t.split(",")).every(E)}function q(t){return(Array.isArray(t)?t:t.split(",")).every(z)}var H={props:{position:{type:R,validator:U},rotation:{type:C,validator:function(t){if(t instanceof e.Euler)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.slice(0,3).every(E)&&/[XYZ]{3}/.test(i[3])}},rotationQuaternion:{type:G,validator:function(t){if(t instanceof e.Quaternion)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.every(E)}},scale:{type:R,validator:U},castShadow:x,receiveShadow:x,name:{type:L,validator:B},hidden:x},inject:{vglObject3d:{default:function(){return new d}},vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},provide:function(){var t=this;return{vglObject3d:new d(this.vglObject3d,(function(){return t.inst}))}},computed:{inst:function(){return new e.Object3D},parent:function(){return this.vglObject3d.inst()}},methods:{emitAsObject3d:function(){this.vglNamespace.object3ds.emit(this.name,this.inst)}},beforeDestroy:function(){this.inst.parent&&this.inst.parent.remove(this.inst),void 0!==this.name&&(this.vglObject3d.unlisten(this.emitAsObject3d),this.vglNamespace.object3ds.delete(this.name,this.inst))},watch:{inst:{handler:function(t,e){e&&e.parent&&e.parent.remove(e),this.parent&&this.parent.add(t),this.position&&t.position.copy(v(this.position)),this.rotation&&t.rotation.copy(y(this.rotation)),this.rotationQuaternion&&t.quaternion.copy(b(this.rotationQuaternion)),this.scale&&t.scale.copy(v(this.scale)),Object.assign(t,{castShadow:this.castShadow,receiveShadow:this.receiveShadow,visible:!this.hidden,name:this.name}),void 0!==this.name&&this.vglNamespace.object3ds.set(this.name,t),e&&this.vglObject3d.emit()},immediate:!0},parent:function(t){t.add(this.inst)},name:[function(t){this.inst.name=t},{handler:function(t,e){void 0!==e&&(this.vglNamespace.object3ds.delete(e,this.inst),void 0===t&&this.vglObject3d.unlisten(this.emitAsObject3d)),void 0!==t&&(this.vglNamespace.object3ds.set(t,this.inst),void 0===e&&this.vglObject3d.listen(this.emitAsObject3d))},immediate:!0}],position:function(t){this.inst.position.copy(v(t)),this.vglObject3d.emit()},rotation:function(t){this.inst.rotation.copy(y(t)),this.vglObject3d.emit()},rotationQuaternion:function(t){this.inst.quaternion.copy(b(t)),this.vglObject3d.emit()},scale:function(t){this.inst.scale.copy(v(t)),this.vglObject3d.emit()},castShadow:function(t){this.inst.castShadow=t,this.vglObject3d.emit()},receiveShadow:function(t){this.inst.receiveShadow=t,this.vglObject3d.emit()},hidden:function(t){this.inst.visible=!t,this.vglObject3d.emit()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},W={mixins:[H],props:{fog:[String,e.Fog],backgroundColor:A,backgroundTexture:{type:L,validator:B},name:{type:L,required:!0,validator:B}},computed:{inst:function(){return new e.Scene}},methods:{setBackgroundTexture:function(t){this.inst.background=t||null,this.vglObject3d.emit()},emitAsScene:function(){this.vglNamespace.scenes.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsScene)},beforeDestroy:function(){void 0!==this.backgroundTexture&&this.vglNamespace.textures.unlisten(this.backgroundTexture,this.setBackgroundTexture),this.vglNamespace.scenes.delete(this.name,this.inst),this.vglObject3d.unlisten(this.emitAsScene)},watch:{inst:{handler:function(t){void 0!==this.fog&&(this.inst.fog=j(this.fog)),void 0!==this.backgroundColor&&(this.inst.background=m(this.backgroundColor)),void 0!==this.backgroundTexture&&this.setBackgroundTexture(this.vglNamespace.textures.get(this.backgroundTexture)),this.vglNamespace.scenes.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.scenes.delete(e,this.inst),this.vglNamespace.scenes.set(t,this.inst)},fog:function(t){this.inst.fog=j(t),this.vglObject3d.emit()},backgroundColor:function(t){this.inst.background=m(t),this.vglObject3d.emit()},backgroundTexture:{handler:function(t,e){void 0!==e&&this.vglNamespace.textures.unlisten(e,this.setBackgroundTexture),void 0!==t&&(this.vglNamespace.textures.listen(t,this.setBackgroundTexture),this.setBackgroundTexture(this.vglNamespace.textures.get(t)))},immediate:!0}}},Q={mixins:[H],props:{orbitTarget:{type:R,validator:U},orbitPosition:{type:D,validator:function(t){if(t instanceof e.Spherical)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every(E)}},name:{type:L,required:!0,validator:B}},computed:{inst:function(){return new e.Camera}},methods:{emitAsCamera:function(){this.vglNamespace.cameras.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsCamera)},beforeDestroy:function(){this.vglObject3d.unlisten(this.emitAsCamera),this.vglNamespace.cameras.delete(this.name,this.inst)},watch:{inst:{handler:function(t){var i;(this.orbitPosition||this.orbitTarget)&&(this.orbitTarget&&(i=v(this.orbitTarget)),this.orbitPosition&&(t.position.setFromSpherical(w(this.orbitPosition)),i&&t.position.add(i)),t.lookAt(i||new e.Vector3));this.vglNamespace.cameras.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.cameras.delete(e,this.inst),this.vglNamespace.cameras.set(t,this.inst)},orbitTarget:function(t){var e=v(t);this.orbitPosition&&this.inst.position.setFromSpherical(w(this.orbitPosition)).add(e),this.inst.lookAt(e),this.vglObject3d.emit()},orbitPosition:function(t){if(this.inst.position.setFromSpherical(w(t)),this.orbitTarget){var i=v(this.orbitTarget);this.inst.position.add(i),this.inst.lookAt(i)}else this.inst.lookAt(new e.Vector3);this.vglObject3d.emit()}}};function _(t,e,i){if(t.isPerspectiveCamera)Object.assign(t,{aspect:e/i});else{if(!t.isOrthographicCamera)throw new TypeError("Unknown camera type.");Object.assign(t,{left:-e/2,right:e/2,top:i/2,bottom:-i/2})}t.updateProjectionMatrix()}var K={mixins:[p],props:{camera:{type:L,required:!0,validator:B},scene:{type:L,required:!0,validator:B},alpha:x,disablePremultipliedAlpha:x,antialias:x,disableStencil:x,preserveDrawingBuffer:x,disableDepth:x,logarithmicDepthBuffer:x,shadowMapEnabled:x,precision:{type:A,validator:function(t){return/^(highp|mediump|lowp)$/.test(t)}},powerPreference:{type:A,validator:function(t){return/^(high-performance|low-power|default)$/.test(t)}}},computed:{inst:function(){var t=new e.WebGLRenderer({precision:this.precision,alpha:this.alpha,premultipliedAlpha:!this.disablePremultipliedAlpha,antialias:this.antialias,stencil:!this.disableStencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:!this.disableDepth,logarithmicDepthBuffer:this.logarithmicDepthBuffer,powerPreference:this.powerPreference});return t.shadowMap.enabled=this.shadowMapEnabled,t}},methods:{setCameraRef:function(t){this.cameraRef=t,this.$el&&(t&&_(t,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(t&&this.sceneRef))},setSceneRef:function(t){this.sceneRef=t,this.$el&&this.requestRender(t&&this.cameraRef)},setFallbackCamera:function(t){var e=t.keys();this.setCameraRef(1===e.length?t.get(e[0]):void 0)},setFallbackScene:function(t){var e=t.keys();this.setSceneRef(1===e.length?t.get(e[0]):void 0)},requestRender:function(){var t=this;this.reservation||this.$nextTick((function(){if(t.reservation>0)t.inst.render(t.sceneRef,t.cameraRef);else{if(!t.cameraRef&&t.vglNamespace.cameras.keys().length){if(void 0===t.camera){var e=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the camera. Multiple(".concat(e,") cameras are defined but camera prop is not given."))}throw new ReferenceError("Cannot identify the camera. The camera named ".concat(t.camera," is not defined."))}if(!t.sceneRef&&t.vglNamespace.scenes.keys().length){if(void 0===t.scene){var i=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the scene. Multiple(".concat(i,") scenes are defined but scene prop is not given."))}throw new ReferenceError("Cannot identify the scene. The scene named ".concat(t.scene," is not defined."))}}t.reservation=0})),this.reservation=!arguments.length||(arguments.length<=0?void 0:arguments[0])?1:-1}},mounted:function(){this.inst.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.appendChild(this.inst.domElement),this.cameraRef&&_(this.cameraRef,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(this.cameraRef&&this.sceneRef)},beforeDestroy:function(){void 0===this.camera?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(this.camera,this.setCameraRef),void 0===this.scene?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(this.scene,this.setSceneRef),this.inst.dispose()},watch:{inst:function(t,e){this.$el&&(t.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.replaceChild(t.domElement,e.domElement),this.cameraRef&&this.sceneRef&&this.requestRender()),e.dispose()},camera:{handler:function(t,e){void 0===e?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(e,this.setCameraRef),void 0===t?(this.vglNamespace.cameras.listen(this.setFallbackCamera),this.setFallbackCamera(this.vglNamespace.cameras)):(this.vglNamespace.cameras.listen(t,this.setCameraRef),this.setCameraRef(this.vglNamespace.cameras.get(t)))},immediate:!0},scene:{handler:function(t,e){void 0===e?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(e,this.setSceneRef),void 0===t?(this.vglNamespace.scenes.listen(this.setFallbackScene),this.setFallbackScene(this.vglNamespace.scenes)):(this.vglNamespace.scenes.listen(t,this.setSceneRef),this.setSceneRef(this.vglNamespace.scenes.get(t)))},immediate:!0}},render:function(t){var e=this;return t("div",[t("iframe",{style:{visibility:"hidden",width:"100%",height:"100%",marginRight:"-100%",border:"none"},on:{load:function(t){t.target.contentWindow.addEventListener("resize",(function(){e.inst.setSize(e.$el.clientWidth,e.$el.clientHeight),e.cameraRef&&(_(e.cameraRef,e.$el.clientWidth,e.$el.clientHeight),e.sceneRef&&e.requestRender())}),!1)}}},this.$slots.default)])}},X={mixins:[Q],props:{zoom:{type:O,default:1},near:{type:O,default:.1},far:{type:O,default:2e3},fov:{type:O,default:50}},computed:{inst:function(){return new e.PerspectiveCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far),fov:parseFloat(this.fov)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()},fov:function(t){this.inst.fov=parseFloat(t),this.vglObject3d.emit()}}},Y={mixins:[H],computed:{inst:function(){return new e.Group}}},Z={mixins:[H],props:{color:{type:M,default:"#fff"},intensity:{type:O,default:1}},computed:{inst:function(){return new e.Light}},watch:{inst:{handler:function(t){t.color.setStyle(this.color),Object.assign(t,{intensity:parseFloat(this.intensity)})},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.vglObject3d.emit()},intensity:function(t){this.inst.intensity=parseFloat(t),this.vglObject3d.emit()}}},J={mixins:[Z],computed:{inst:function(){return new e.DirectionalLight}}},tt={mixins:[Z],computed:{inst:function(){return new e.AmbientLight}}},et={no:e.NoColors,vertex:e.VertexColors,face:e.FaceColors},it={front:e.FrontSide,back:e.BackSide,double:e.DoubleSide},st={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:L,required:!0,validator:B},side:{type:A,default:"front"},vertexColors:{type:A,default:"no"}},computed:{inst:function(){return new e.Material}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.materials.emit(this.name,this.inst)}},watch:{inst:{handler:function(t){t.setValues({side:it[this.side],vertexColors:et[this.vertexColors]}),this.vglNamespace.materials.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.materials.delete(e,this.inst),void 0!==t&&this.vglNamespace.materials.set(t,this.inst)},side:function(t){this.inst.side=it[t],this.update()},vertexColors:function(t){this.inst.vertexColors=et[t],this.update()}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.materials.delete(this.name,this.inst)},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},nt={mixins:[st],props:{color:{type:M,default:"#fff"},size:{type:O,default:1},disableSizeAttenuation:x},computed:{inst:function(){return new e.PointsMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{size:parseFloat(this.size),sizeAttenuation:!this.disableSizeAttenuation}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},size:function(t){this.inst.size=parseFloat(t),this.update()},disableSizeAttenuation:function(t){this.inst.sizeAttenuation=!t,this.update()}}},at={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:L,required:!0,validator:B},positionAttribute:{type:T,validator:$},colorAttribute:{type:T,validator:$},normalAttribute:{type:T,validator:$}},computed:{inst:function(){return new e.BufferGeometry}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.geometries.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.geometries.delete(this.name,this.inst),this.inst.dispose()},watch:{inst:{handler:function(t,i){if(this.positionAttribute){var s=i?i.getAttribute("position"):new e.BufferAttribute(new Float32Array(S(this.positionAttribute)),3);t.setAttribute("position",s)}if(this.colorAttribute){var n=i?i.getAttribute("color"):new e.BufferAttribute(new Float32Array(S(this.colorAttribute)),3);t.setAttribute("color",n)}if(this.normalAttribute){var a=i?i.getAttribute("normal"):new e.BufferAttribute(new Float32Array(S(this.normalAttribute)),3);t.setAttribute("normal",a)}i&&i.dispose(),this.vglNamespace.geometries.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.geometries.delete(e,this.inst),void 0!==t&&this.vglNamespace.geometries.set(t,this.inst)},positionAttribute:function(t){var i=S(t),s=this.inst.getAttribute("position");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("position",s)}s.needsUpdate=!0,this.update()},colorAttribute:function(t){var i=S(t),s=this.inst.getAttribute("color");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("color",s)}s.needsUpdate=!0,this.update()},normalAttribute:function(t){var i=S(t),s=this.inst.getAttribute("normal");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("normal",s)}s.needsUpdate=!0,this.update()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},rt={mixins:[at],props:{radius:{type:O,default:1},widthSegments:{type:N,default:8},heightSegments:{type:N,default:6},phiStart:{type:O,default:0},phiLength:{type:O,default:2*Math.PI},thetaStart:{type:O,default:0},thetaLength:{type:O,default:Math.PI}},computed:{inst:function(){return new e.SphereBufferGeometry(parseFloat(this.radius),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseFloat(this.phiStart),parseFloat(this.phiLength),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},ot={mixins:[H],methods:{setMaterial:function(){var t=this.vglNamespace.materials,e=this.inst,i=f(this.material).reduce((function(e,i){return t.get(i)?[].concat(c(e),[t.get(i)]):e}),[]);e.material=1===i.length?i[0]:i,this.vglObject3d.emit()}},watch:{inst:function(){void 0!==this.material&&this.setMaterial()},material:{handler:function(t,e){var i=this.vglNamespace.materials,s=this.setMaterial;void 0!==e&&f(e).forEach((function(t){return i.unlisten(t,s)})),void 0!==t&&(f(t).forEach((function(t){return i.listen(t,s)})),s())},immediate:!0}},beforeDestroy:function(){var t=this.vglNamespace.materials,e=this.material,i=this.setMaterial;f(e).forEach((function(e){return t.unlisten(e,i)}))}},lt={mixins:[ot],methods:{setGeometry:function(t){t&&(this.inst.geometry=t,this.vglObject3d.emit(),void 0!==this.name&&this.vglNamespace.object3ds.emit(this.name,this.inst))}},watch:{inst:function(){void 0!==this.geometry&&this.setGeometry(this.vglNamespace.geometries.get(this.geometry))},geometry:{handler:function(t,e){var i=this.vglNamespace.geometries,s=this.setGeometry;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.geometries.unlisten(this.geometry,this.setGeometry)}},ht={mixins:[st],methods:{setMap:function(){var t=this.vglNamespace.textures,e=this.inst,i=this.map;t.keys().includes(i)&&(e.map=t.get(i)),this.vglNamespace.materials.emit(this.name,e)}},watch:{inst:function(){void 0!==this.map&&this.setMap(this.vglNamespace.textures.get(this.map))},map:{handler:function(t,e){var i=this.vglNamespace.textures,s=this.setMap;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.textures.unlisten(this.map,this.setMap)}},ct={mixins:[ht],props:{color:{type:M,default:"#fff"},map:{type:L,validator:B}},computed:{inst:function(){return new e.MeshStandardMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},ut={mixins:[lt],props:{geometry:{type:L,validator:B},material:{type:V,validator:I}},computed:{inst:function(){return new e.Mesh}}},pt={mixins:[lt],props:{geometry:{type:L,validator:B},material:{type:L,validator:B}},computed:{inst:function(){return new e.Points}}},dt={mixins:[st],props:{color:{type:M,default:"#fff"},linewidth:{type:O,default:1},linecap:{type:A,default:"round",validator:function(t){return/^(butt|round|square)$/.test(t)}},linejoin:{type:A,default:"round",validator:function(t){return/^(round|bevel|miter)$/.test(t)}}},computed:{inst:function(){return new e.LineBasicMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{linecap:this.linecap,linejoin:this.linejoin,linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},linecap:function(t){this.inst.linecap=t,this.update()},linejoin:function(t){this.inst.linejoin=t,this.update()}}},ft={mixins:[lt],props:{geometry:{type:L,validator:B},material:{type:L,validator:B}},computed:{inst:function(){return new e.Line}},methods:{computeLineDistances:function(){this.inst.material.isLineDashedMaterial&&this.inst.computeLineDistances()}},beforeDestroy:function(){void 0!==this.geometry&&this.vglNamespace.geometries.unlisten(this.geometry,this.computeLineDistances),void 0!==this.material&&this.vglNamespace.materials.unlisten(this.material,this.computeLineDistances)},watch:{geometry:{handler:function(t,e){void 0!==e&&this.vglNamespace.geometries.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.geometries.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0},material:{handler:function(t,e){void 0!==e&&this.vglNamespace.materials.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.materials.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0}}},mt={mixins:[ot],props:{material:{type:L,validator:B}},computed:{inst:function(){return new e.Sprite}}},gt={mixins:[at],props:{width:{type:O,default:1},height:{type:O,default:1},depth:{type:O,default:1},widthSegments:{type:N,default:1},heightSegments:{type:N,default:1},depthSegments:{type:N,default:1}},computed:{inst:function(){return new e.BoxBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseFloat(this.depth),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseInt(this.depthSegments,10))}}},vt={mixins:[at],props:{radius:{type:O,default:1},segments:{type:N,default:8},thetaStart:{type:O,default:0},thetaLength:{type:O,default:2*Math.PI}},computed:{inst:function(){return new e.CircleBufferGeometry(parseFloat(this.radius),parseInt(this.segments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},yt={mixins:[ft],computed:{inst:function(){return new e.LineSegments}}},bt={mixins:[ft],computed:{inst:function(){return new e.LineLoop}}},wt={mixins:[at],props:{radiusTop:{type:O,default:1},radiusBottom:{type:O,default:1},height:{type:O,default:1},radialSegments:{type:N,default:8},heightSegments:{type:N,default:1},openEnded:x,thetaStart:{type:O,default:0},thetaLength:{type:O,default:2*Math.PI}},computed:{inst:function(){return new e.CylinderBufferGeometry(parseFloat(this.radiusTop),parseFloat(this.radiusBottom),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},St={mixins:[wt],props:{radius:{type:O,default:1}},computed:{inst:function(){return new e.ConeBufferGeometry(parseFloat(this.radius),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Ft={mixins:[H],props:{size:{type:O,default:1}},computed:{inst:function(){return new e.AxesHelper(parseFloat(this.size))}}},jt={mixins:[Q],props:{zoom:{type:O,default:1},near:{type:O,default:.1},far:{type:O,default:2e3}},computed:{inst:function(){return new e.OrthographicCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()}}},xt={mixins:[at],props:{width:{type:O,default:1},height:{type:O,default:1},widthSegments:{type:N,default:1},heightSegments:{type:N,default:1}},computed:{inst:function(){return new e.PlaneBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10))}}},Nt={mixins:[at],props:{radius:{type:O,default:1},detail:{type:N,default:0}},computed:{inst:function(){return new e.DodecahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Ot={mixins:[at],props:{radius:{type:O,default:1},detail:{type:N,default:0}},computed:{inst:function(){return new e.IcosahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},At={mixins:[at],props:{radius:{type:O,default:1},detail:{type:N,default:0}},computed:{inst:function(){return new e.OctahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Lt={mixins:[at],props:{innerRadius:{type:O,default:.5},outerRadius:{type:O,default:1},thetaSegments:{type:N,default:8},phiSegments:{type:N,default:1},thetaStart:{type:O,default:0},thetaLength:{type:O,default:2*Math.PI}},computed:{inst:function(){return new e.RingBufferGeometry(parseFloat(this.innerRadius),parseFloat(this.outerRadius),parseInt(this.thetaSegments,10),parseInt(this.phiSegments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Vt={mixins:[at],props:{radius:{type:O,default:1},detail:{type:N,default:0}},computed:{inst:function(){return new e.TetrahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Mt={mixins:[at],props:{radius:{type:O,default:1},tube:{type:O,default:.4},radialSegments:{type:N,default:8},tubularSegments:{type:N,default:6},arc:{type:O,default:2*Math.PI}},computed:{inst:function(){return new e.TorusBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.radialSegments,10),parseInt(this.tubularSegments,10),parseFloat(this.arc))}}},kt={mixins:[at],props:{radius:{type:O,default:1},tube:{type:O,default:.4},radialSegments:{type:N,default:8},tubularSegments:{type:N,default:64},p:{type:N,default:2},q:{type:N,default:3}},computed:{inst:function(){return new e.TorusKnotBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.tubularSegments,10),parseInt(this.radialSegments,10),parseInt(this.p,10),parseInt(this.q,10))}}},Rt={mixins:[H],props:{dir:{type:R,validator:U},length:{type:O,default:1},color:{type:M,default:"#ff0"},headLength:O,headWidth:O},computed:{inst:function(){return new e.ArrowHelper(new e.Vector3(0,1,0),new e.Vector3)},len:function(){return[parseFloat(this.length),void 0!==this.headLength?parseFloat(this.headLength):void 0,void 0!==this.headWidth?parseFloat(this.headWidth):void 0]}},watch:{inst:{handler:function(t){this.dir&&t.setDirection(v(this.dir).normalize()),t.setLength.apply(t,c(this.len)),t.setColor(new e.Color(this.color))},immediate:!0},dir:function(t){this.inst.setDirection(v(t).normalize()),this.vglObject3d.emit()},len:function(t){var e;(e=this.inst).setLength.apply(e,c(t)),this.vglObject3d.emit()},color:function(t){this.inst.setColor(new e.Color(t)),this.vglObject3d.emit()}}},Ct={mixins:[H],props:{color:{type:M,default:"#ff0"},object:{type:L,required:!0,validator:B}},computed:{inst:function(){return new e.BoxHelper(void 0,this.color)}},methods:{setFromObject:function(t){this.inst.setFromObject(t)}},beforeDestroy:function(){void 0!==this.object&&this.vglNamespace.object3ds.unlisten(this.object,this.setFromObject)},watch:{inst:function(){void 0!==this.object&&this.setFromObject(this.vglNamespace.object3ds.get(this.object))},object:{handler:function(t,e){var i=this.vglNamespace.object3ds,s=this.setFromObject;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(this.vglNamespace.object3ds.get(t)))},immediate:!0}}},Gt={mixins:[Z],props:{distance:{type:O,default:0},decay:{type:O,default:1}},computed:{inst:function(){return new e.PointLight}},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay)})},immediate:!0},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()}}},Dt={mixins:[Z],props:{distance:{type:O,default:0},decay:{type:O,default:1},angle:{type:O,default:Math.PI/3},penumbra:{type:O,default:0},target:{type:R,validator:U}},computed:{inst:function(){return new e.SpotLight}},beforeDestroy:function(){this.inst.target.parent&&this.inst.target.parent.remove(this.inst.target)},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay),angle:parseFloat(this.angle),penumbra:parseFloat(this.penumbra)}),this.target&&t.target.position.copy(v(this.target)),this.parent&&this.parent.add(t.target)},immediate:!0},parent:function(t){t.add(this.inst.target)},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()},angle:function(t){this.inst.angle=parseFloat(t),this.vglObject3d.emit()},penumbra:function(t){this.inst.penumbra=parseFloat(t),this.vglObject3d.emit()},target:function(t){this.inst.target.position.copy(v(t)),this.vglObject3d.emit()}}},Tt={uv:e.UVMapping,"cube-reflection":e.CubeReflectionMapping,"cube-refraction":e.CubeRefractionMapping,"equirectangular-reflection":e.EquirectangularReflectionMapping,"equirectangular-refraction":e.EquirectangularRefractionMapping,"spherical-reflection":e.SphericalReflectionMapping,"cube-uv-reflection":e.CubeUVReflectionMapping,"cube-uv-refraction":e.CubeUVRefractionMapping},Pt={repeat:e.RepeatWrapping,"clamp-to-edge":e.ClampToEdgeWrapping,"mirrored-repeat":e.MirroredRepeatWrapping},Et={nearest:e.NearestFilter,"nearest-mip-map-nearest":e.NearestMipMapNearestFilter,"nearest-mip-map-linear":e.NearestMipMapLinearFilter,linear:e.LinearFilter,"linear-mip-map-nearest":e.LinearMipMapNearestFilter,"linear-mip-map-linear":e.LinearMipMapLinearFilter},Bt={alpha:e.AlphaFormat,rgb:e.RGBFormat,rgba:e.RGBAFormat,luminance:e.LuminanceFormat,"luminance-alpha":e.LuminanceAlphaFormat,rgbe:e.RGBEFormat,depth:e.DepthFormat,"depth-stencil":e.DepthStencilFormat},It={"unsigned-byte":e.UnsignedByteType,byte:e.ByteType,short:e.ShortType,"unsigned-short":e.UnsignedShortType,int:e.IntType,"unsigned-int":e.UnsignedIntType,float:e.FloatType,"half-float":e.HalfFloatType,"unsigned-short-4444":e.UnsignedShort4444Type,"unsigned-short-5551":e.UnsignedShort5551Type,"unsigned-short-565":e.UnsignedShort565Type,"unsigned-int-248":e.UnsignedInt248Type},zt={linear:e.LinearEncoding,"s-rgb":e.sRGBEncoding,gamma:e.GammaEncoding,rgbe:e.RGBEEncoding,"log-luv":e.LogLuvEncoding,rgbm7:e.RGBM7Encoding,rgbm16:e.RGBM16Encoding,rgbde:e.RGBDEncoding,"basic-depth":e.BasicDepthPacking,"rgba-depth":e.RGBADepthPacking},Ut={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{src:A,name:{type:L,required:!0,validator:B},mapping:{type:A,default:"uv"},wrapS:{type:A,default:"clamp-to-edge"},wrapT:{type:A,default:"clamp-to-edge"},magFilter:{type:A,default:"linear"},minFilter:{type:A,default:"linear-mip-map-linear"},anisotropy:{type:N,default:1},format:A,type:{type:A,default:"unsigned-byte"},offset:{type:k,validator:z},repeat:{type:k,validator:z},rotation:{type:O,default:0},center:{type:k,validator:z},premultiplyAlpha:x,unpackAlignment:{type:N,default:4},encoding:{type:A,default:"linear"}},computed:{inst:function(){var t=this;return(new e.TextureLoader).load(this.src,(function(e){t.format&&Object.assign(e,{format:Bt[t.format]}),t.update()}))}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.textures.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.textures.delete(this.name,this.inst)},watch:{inst:{handler:function(t){Object.assign(t,{mapping:Tt[this.mapping],wrapS:Pt[this.wrapS],wrapT:Pt[this.wrapT],magFilter:Et[this.magFilter],minFilter:Et[this.minFilter],anisotropy:parseInt(this.anisotropy,10),type:It[this.type],rotation:parseFloat(this.rotation),premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:parseInt(this.unpackAlignment,10),encoding:zt[this.encoding]}),this.offset&&t.offset.copy(g(this.offset)),this.repeat&&t.repeat.copy(g(this.repeat)),this.center&&t.center.copy(g(this.center)),void 0!==this.name&&this.vglNamespace.textures.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.textures.delete(e,this.inst),void 0!==t&&this.vglNamespace.textures.set(t,this.inst)},mapping:function(t){this.inst.mapping=Tt[t],this.update()},wrapS:function(t){this.inst.wrapS=Pt[t],this.update()},wrapT:function(t){this.inst.wrapT=Pt[t],this.update()},magFilter:function(t){this.inst.magFilter=Et[t],this.update()},minFilter:function(t){this.inst.minFilter=Et[t],this.update()},anisotropy:function(t){this.inst.anisotropy=parseInt(t,10),this.update()},format:function(t){this.inst.format=Bt[t],this.update()},type:function(t){this.inst.type=It[t],this.update()},offset:function(t){this.inst.offset.copy(g(t)),this.update()},repeat:function(t){this.inst.repeat.copy(g(t)),this.update()},rotation:function(t){this.inst.rotation=parseFloat(t),this.update()},center:function(t){this.inst.center.copy(g(t)),this.update()},premultiplyAlpha:function(t){this.inst.premultiplyAlpha=t,this.update()},unpackAlignment:function(t){this.inst.unpackAlignment=parseInt(t,10),this.update()},encoding:function(t){this.inst.encoding=zt[t],this.update()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},$t={mixins:[at],props:{shapes:{type:V,validator:I},curveSegments:N,steps:N,depth:O,bevelEnabled:x,bevelThickness:O,bevelSize:O,bevelOffset:O,bevelSegments:N,extrudePath:Object,uvGenerator:Object},data:function(){return{shapeNames:[]}},computed:{options:function(){var t=this.curveSegments,e=this.steps,i=this.depth,s=this.bevelEnabled,n=this.bevelThickness,o=this.bevelSize,l=this.bevelOffset,h=this.bevelSegments,c=this.extrudePath,u=this.uvGenerator;return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},null!=t&&{curveSegments:parseInt(t,10)},{},null!=e&&{steps:parseInt(e,10)},{},null!=i&&{depth:parseFloat(i)},{},null!=s&&{bevelEnabled:s},{},null!=n&&{bevelThickness:parseFloat(n)},{},null!=o&&{bevelSize:parseFloat(o)},{},null!=l&&{bevelOffset:parseFloat(l)},{},null!=h&&{bevelSegments:parseInt(h,10)},{},null!=c&&{extrudePath:c},{},null!=u&&{UVGenerator:u})},inst:function(){var t=this,i=this.shapeNames.map((function(e){var i=h(e,1)[0];return t.vglNamespace.curves.get(i)}));return new e.ExtrudeBufferGeometry(i,this.options)}},methods:{setShapeNames:function(){var t=this,e=f(this.shapes);this.shapeNames=e.map((function(e){return[e,t.vglNamespace.curves.get(e).uuid]})),this.update()}},beforeDestroy:function(){var t=this;void 0!==this.shapes&&f(this.shapes).forEach((function(e){t.vglNamespace.curves.unlisten(e,t.setShapeUuids)}))},watch:{shapes:{handler:function(t,e){var i=this,s=void 0===e?[]:f(e),n=void 0===t?[]:f(t);s.forEach((function(t){n.includes(t)||i.vglNamespace.curves.unlisten(t,i.setShapeNames)})),V.forEach((function(t){s.includes(t)||i.vglNamespace.curves.listen(t,i.setShapeNames)})),void 0!==t&&this.setShapeNames()},immediate:!0}}},qt=Object.create(null),Ht={mixins:[$t],props:{text:{type:A,default:""},font:A,size:{type:O,default:100},height:{type:O,default:50},curveSegments:{type:N,default:12},bevelEnabled:x,bevelThickness:{type:O,default:10},bevelSize:{type:O,default:8},bevelSegments:{type:N,default:3}},data:function(){return{f:void 0}},computed:{inst:function(){return void 0!==this.f?new e.TextBufferGeometry(this.text,{font:qt[this.f],size:parseFloat(this.size),height:parseFloat(this.height),curveSegments:parseInt(this.curveSegments,10),bevelEnabled:this.bevelEnabled,bevelThickness:parseFloat(this.bevelThickness),bevelSize:parseFloat(this.bevelSize),bevelSegments:parseInt(this.bevelSegments,10)}):new e.BufferGeometry}},watch:{font:{handler:function(t){var i=this;qt[t]?qt[t].isFont?this.f=t:qt[t].push((function(){t===i.font&&(i.f=t)})):(qt[t]=[function(){t===i.font&&(i.f=t)}],(new e.FontLoader).load(t,(function(e){var s=qt[t];qt[t]=e,s.forEach((function(t){t()})),i.vglNamespace.geometries.emit(i.name,i.inst)}))),this.vglNamespace.geometries.emit(this.name,this.inst)},immediate:!0}}},Wt={mixins:[ht],props:{color:{type:M,default:"#fff"},map:{type:L,validator:B}},computed:{inst:function(){return new e.SpriteMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},Qt={mixins:[H],props:{size:{type:O,default:10},divisions:{type:N,default:10},colorCenterLine:{type:M,default:"#444444"},colorGrid:{type:M,default:"#888888"}},computed:{inst:function(){return new e.GridHelper(parseFloat(this.size),parseInt(this.divisions,10),this.colorCenterLine,this.colorGrid)}}},_t={mixins:[st],computed:{inst:function(){return new e.ShadowMaterial}}},Kt={mixins:[H],props:{camera:{type:L,required:!0,validator:B}},data:function(){return{exist:!1}},computed:{inst:function(){if(!this.exist)return new e.Object3D;var t=this.vglNamespace.cameras.get(this.camera);return t.updateProjectionMatrix(),new e.CameraHelper(t)}},methods:{update:function(t){t?(this.exist=!0,t.updateProjectionMatrix(),this.inst.camera=t,this.inst.update(),this.vglObject3d.emit()):this.exist=!1}},beforeDestroy:function(){this.vglNamespace.cameras.unlisten(this.camera,this.update)},watch:{camera:{handler:function(t,e){void 0!==e&&this.vglNamespace.cameras.unlisten(e,this.update),this.vglNamespace.cameras.listen(t,this.update),this.exist=!!this.vglNamespace.cameras.get(t)},immediate:!0}}},Xt={mixins:[H],props:{color:M,size:{type:O,default:1},light:{type:L,required:!0,validator:B}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.DirectionalLightHelper(t,parseFloat(this.size))}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},Yt={mixins:[H],props:{radius:{type:O,default:10},radials:{type:N,default:16},circles:{type:N,default:8},divisions:{type:N,default:64},color1:{type:M,default:"#444444"},color2:{type:M,default:"#888888"}},computed:{inst:function(){return new e.PolarGridHelper(parseFloat(this.radius),parseInt(this.radials,10),parseInt(this.circles,10),parseInt(this.divisions,10),this.color1,this.color2)}}},Zt={mixins:[ht],props:{color:{type:M,default:"#fff"},map:{type:L,validator:B}},computed:{inst:function(){return new e.MeshBasicMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},Jt={mixins:[ht],props:{fog:x,map:{type:L,validator:B}},computed:{inst:function(){return new e.MeshDepthMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},te={mixins:[ht],props:{color:{type:M,default:"#fff"},map:{type:L,validator:B}},computed:{inst:function(){return new e.MeshLambertMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},ee={mixins:[st],props:{color:{type:M,default:"#fff"},linewidth:{type:O,default:1},dashSize:{type:O,default:3},gapSize:{type:O,default:1}},computed:{inst:function(){return new e.LineDashedMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{dashSize:parseFloat(this.dashSize),gapSize:parseFloat(this.gapSize),linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},dashSize:function(t){this.inst.dashSize=parseFloat(t),this.update()},gapSize:function(t){this.inst.gapSize=parseFloat(t),this.update()}}},ie={mixins:[st],props:{fog:x},computed:{inst:function(){return new e.MeshNormalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},se={mixins:[ht],props:{color:{type:M,default:"#fff"},map:{type:L,validator:B},specular:{type:M,default:"#111111"},shininess:{type:O,default:30}},computed:{inst:function(){return new e.MeshPhongMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{shininess:parseFloat(this.shininess)}),t.specular.setStyle(this.specular),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},specular:function(t){this.inst.specular.setStyle(t),this.update()},shininess:function(t){this.inst.shininess=parseFloat(t),this.update()}}},ne={mixins:[se],computed:{inst:function(){return new e.MeshToonMaterial}}},ae={mixins:[ct],props:{clearcoat:{type:O,default:0},clearcoatRoughness:{type:O,default:0},reflectivity:{type:O,default:.5}},computed:{inst:function(){return new e.MeshPhysicalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{clearcoat:parseFloat(this.clearcoat),clearcoatRoughness:parseFloat(this.clearcoatRoughness),reflectivity:parseFloat(this.reflectivity)})},immediate:!0},clearcoat:function(t){this.inst.clearcoat=parseFloat(t),this.update()},clearcoatRoughness:function(t){this.inst.clearcoatRoughness=parseFloat(t),this.update()},reflectivity:function(t){this.inst.reflectivity=parseFloat(t),this.update()}}},re={mixins:[ht],props:{defines:{type:Object,default:function(){return{}}},fog:{type:x,default:!1},fragmentShader:{type:A},lights:{type:x,default:!1},linewidth:{type:O,default:1},flatShading:{type:x,default:!1},uniforms:{type:Object,default:function(){return{}}},vertexShader:{type:A},wireframe:{type:x,default:!1},wireframeLinewidth:{type:O,default:1}},computed:{inst:function(){return new e.ShaderMaterial({fog:this.fog,lights:this.lights})}},watch:{inst:{handler:function(t){Object.assign(t,{defines:this.defines,fog:this.fog,fragmentShader:this.fragmentShader||t.fragmentShader,lights:this.lights,linewidth:parseFloat(this.linewidth),flatShading:this.flatShading,uniforms:this.uniforms,vertexShader:this.vertexShader||t.vertexShader,wireframe:this.wireframe,wireframeLinewidth:parseFloat(this.wireframeLinewidth)})},immediate:!0},defines:{handler:function(t){this.inst.defines=t,this.update()},deep:!0},fragmentShader:function(t){this.inst.fragmentShader=t,this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},flatShading:function(t){this.inst.flatShading=t,this.update()},uniforms:{handler:function(t){this.inst.uniforms=t,this.update()},deep:!0},vertexShader:function(t){this.inst.vertexShader=t,this.update()},wireframe:function(t){this.inst.wireframe=t,this.update()},wireframeLinewidth:function(t){this.inst.wireframeLinewidth=parseFloat(t),this.update()}}},oe={mixins:[at],props:{points:{type:P,required:!0,validator:q},segments:{type:N,default:12},phiStart:{type:O,default:0},phiLength:{type:O,default:2*Math.PI}},computed:{inst:function(){return new e.LatheBufferGeometry(F(this.points),parseInt(this.segments,10),parseFloat(this.phiStart),parseFloat(this.phiLength))}}},le={mixins:[H],props:{color:M,light:{type:L,required:!0,validator:B}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.SpotLightHelper(t)}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},he={mixins:[Z],props:{groundColor:{type:M,default:"#fff"}},computed:{inst:function(){return new e.HemisphereLight}},watch:{inst:{handler:function(t){t.groundColor.setStyle(this.groundColor)},immediate:!0},groundColor:function(t){this.inst.groundColor.setStyle(t),this.vglObject3d.emit()}}},ce={mixins:[Z],props:{width:{type:O,default:10},height:{type:O,default:10}},computed:{inst:function(){return new e.RectAreaLight}},watch:{inst:{handler:function(t){Object.assign(t,{width:parseFloat(this.width),height:parseFloat(this.height)})},immediate:!0},width:function(t){this.inst.width=parseFloat(t),this.vglObject3d.emit()},height:function(t){this.inst.height=parseFloat(t),this.vglObject3d.emit()}}},ue={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:L,required:!0,validator:B}},computed:{inst:function(){return new e.Curve}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.curves.delete(this.name,this.inst)},watch:{inst:{handler:function(t){void 0!==this.name&&this.vglNamespace.curves.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.curves.delete(e,this.inst),void 0!==t&&this.vglNamespace.curves.set(t,this.inst)}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},pe={mixins:[ue],props:{autoClose:x},computed:{inst:function(){return new e.CurvePath}},watch:{inst:{handler:function(t){Object.assign(t,{autoClose:this.autoClose})},immediate:!0},autoClose:function(t){this.inst.autoClose=t}}},de={mixins:[pe],props:{path:{type:P,validator:q}},computed:{inst:function(){var t=new e.Path;return void 0!==this.path&&t.setFromPoints(F(this.path)),t}}},fe={mixins:[de],computed:{inst:function(){var t=new e.Shape;return void 0!==this.path&&t.setFromPoints(F(this.path)),t}}};t.VglAmbientLight=tt,t.VglArrowHelper=Rt,t.VglAxesHelper=Ft,t.VglBoxGeometry=gt,t.VglBoxHelper=Ct,t.VglCamera=Q,t.VglCameraHelper=Kt,t.VglCircleGeometry=vt,t.VglConeGeometry=St,t.VglCurve=ue,t.VglCurvePath=pe,t.VglCylinderGeometry=wt,t.VglDirectionalLight=J,t.VglDirectionalLightHelper=Xt,t.VglDodecahedronGeometry=Nt,t.VglExtrudeGeometry=$t,t.VglGeometry=at,t.VglGridHelper=Qt,t.VglGroup=Y,t.VglHemisphereLight=he,t.VglIcosahedronGeometry=Ot,t.VglLatheGeometry=oe,t.VglLight=Z,t.VglLine=ft,t.VglLineBasicMaterial=dt,t.VglLineDashedMaterial=ee,t.VglLineLoop=bt,t.VglLineSegments=yt,t.VglMaterial=st,t.VglMesh=ut,t.VglMeshBasicMaterial=Zt,t.VglMeshDepthMaterial=Jt,t.VglMeshLambertMaterial=te,t.VglMeshNormalMaterial=ie,t.VglMeshPhongMaterial=se,t.VglMeshPhysicalMaterial=ae,t.VglMeshStandardMaterial=ct,t.VglMeshToonMaterial=ne,t.VglNamespace=p,t.VglObject3d=H,t.VglOctahedronGeometry=At,t.VglOrthographicCamera=jt,t.VglPath=de,t.VglPerspectiveCamera=X,t.VglPlaneGeometry=xt,t.VglPointLight=Gt,t.VglPoints=pt,t.VglPointsMaterial=nt,t.VglPolarGridHelper=Yt,t.VglRectAreaLight=ce,t.VglRenderer=K,t.VglRingGeometry=Lt,t.VglScene=W,t.VglShaderMaterial=re,t.VglShadowMaterial=_t,t.VglShape=fe,t.VglSphereGeometry=rt,t.VglSpotLight=Dt,t.VglSpotLightHelper=le,t.VglSprite=mt,t.VglSpriteMaterial=Wt,t.VglTetrahedronGeometry=Vt,t.VglTextGeometry=Ht,t.VglTexture=Ut,t.VglTorusGeometry=Mt,t.VglTorusKnotGeometry=kt,Object.defineProperty(t,"__esModule",{value:!0})}));
